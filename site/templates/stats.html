{% extends "base.html" %}

{% block content %}
{% verbatim %}
<div id="status" v-cloak>
    <div v-if="activeSubject == null" class="uk-grid uk-grid-small uk-grid-match uk-child-width-1-3@m">
        <div class="uk-card uk-card-default" v-for="subject in subjects">
            <div class="uk-card-header">
                <div class="uk-grid-small uk-flex-middle" uk-grid>
                    <div class="uk-width-auto">
                    </div>
                    <div class="uk-width-auto">
                        <h3 class="uk-card-title uk-margin-remove-bottom">{{ subject.name }}</h3>
                        <p class="uk-text-meta uk-margin-remove-top uk-margin-remove-bottom">Created {{ subject.createdAt|date }}</p>
                        <p class="uk-text-meta uk-margin-remove-top">Watched {{ subject.updatedAt|date }}</p>
                    </div>
                </div>
            </div>
            <div class="uk-card-body">

            </div>
            <div class="uk-card-footer">
                <a href="#" class="uk-button uk-button-text">Check graph</a>
            </div>
        </div>
    </div>
</div>
{% endverbatim %}
<script>
const status = new Vue({
    el: "#status",
    data: {
        subjects: [],
        activeSubject: null,
    },
    mounted: function() {
        this.fetchSubjects()
    },
    methods: {
        fetchSubjects: function() {
            axios.get("/api/v1/subject")
            .then(r => {
                if (r.status === 200) {
                    this.subjects = r.data
                }
            })
        }
    }
})
</script>
{% endblock %}